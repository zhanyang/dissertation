\begin{abstract}

Good locality and efficient namespace operations are considered mutually
exclusive in a file system.
Traditional inode-based file systems have good rename performance, but fail
to maintain locality, especially in the face of file system aging.
On the other hand, full-path-indexed file systems ensure locality, however,
renaming a directory needs to update all related full-paths,
which is usually implemented as an expensive operation.

This dissertation describes a technique that has both good locality and
efficient namespace operations.
In particular, we describe a novel synthesis of write-optimization,
full-path indexing and operations on data structures.
By directly manipulating the data structure, a full-path-indexed file system
can efficiently update related full-paths in a rename.
Moreover, with the technique, a full-path-indexed file system can
clone a directory without traversing the directory.

We implement this technique in \betrfs, a full-path-indexed, write-optimized,
local file system for Linux.
Compared to ext4, the widely used inode-based file system in Linux,
the new version of \betrfs traverses the Linux source directory 9.47x faster,
and renames the same directory 1.09x faster.
Meanwhile, the new version of \betrfs clones a directory faster than
file systems that clone the directory through file clones,
such as Btrfs and XFS.

\end{abstract}
